  <script language="javascript" defer="true">
    tstUsername = "";
    tstUserKeyboardPref = "qwerty";
    var d = new Date();
    d.toDateString();
  </script>
<link rel="stylesheet" href="/public/touchscreentoolkit/lib/stylesheets/touch-fancy.css" type="text/css">

<link rel="stylesheet" type="text/css" href="/assets/datatables/jquery.dataTables.css">
<link rel="stylesheet" media="screen" href="/assets/css/extra_buttons.css" />
 <script type="text/javascript" charset="utf8" src="/assets/datatables/js/jquery-1.8.2.min.js"></script>
 <script type="text/javascript" charset="utf8" src="/assets/datatables/js/jquery.dataTables.min.js"></script>





<style>
  .title-table {
    display: table;
    width: 100%;
  }

  .title-row {
    display: table-row;
  }

  .title-cell {
    display: table-cell;
    height: 30px;
    vertical-align: top;
    border-style: solid;
    border-width: 0px 0px 1px 0px;
  }

  #title-cell-left {
    vertical-align: middle;
    width: 100px;
  }

  #title-cell-left img {
    height: 95px;
    width: 95px;
    margin: 5px;
  }

  #title-cell-right {
    margin-left: 5px;
  }

  #data-cell {
    display: table-cell;
    width: 100%;
  }

  #report {
    width: 100%;
  }



  .top-cover-wrapper {
    width: 100%;
    display: inline-flex;
    margin-bottom: 15px;
  }
  .top-cover-wrapper .img {
    height: 100px;
  }
  .top-cover-wrapper .page-title {
    font-size: 30px;
    text-align: center;
    width: 60%;
    padding: 15px;
  }
  .top-cover-wrapper .search-area {
    padding: 15px;
  }
  .top-cover-wrapper .search-area .btn {
    border: 0px;    
    border-radius: 3px;
    color: #fff;
    padding: 0px; 
  }
  .top-cover-wrapper .search-area .form-control {
    padding: 4px;
    margin-top: -5px;
  }
  .table-male th{
    text-align: left;
  }
  .table-male tbody tr:nth-of-type(odd) {
    background-color: rgba(0, 0, 0, 0.05);
  }
  .table-male tbody tr .btn {
    background: #5b75a0;
    padding: 0px;
    margin-left: 15px;
    border: 0px;
    width: 70px;
    font-size: 13px;
    text-decoration: none;
    padding: 6px;
  }
  .table-male tbody tr td {
    text-align: left;
    padding: 10px;
    position: relative;
  }


  #footer {
    background-color: rgb(51,51,51);
    color: #CADCEA;
    height: 80px;
    width: 99%;
    bottom: 0px;
    position: absolute;
    overflow: hidden;
}

#cover-div{
  position: absolute;
  background-color: black;
  width: 100%;
  height: 102%;
  left: 0%;
  top:0%;
  z-index: 990;
  opacity: 0.3;
}
#loader{
  position: absolute;
  width: 10%;
  top:30%;
  margin-left:45%;
  z-index: 991;
}

</style> 

<div class="top-cover-wrapper">
  <div class="logo-area">
    <img src="/assets/images/login-logos/Malawi-Coat_of_arms_of_arms.png" class="img">
  </div>  
  
  <div class="page-title">
   Male Patients With Female Observation
  </div>

  <div class="search-area" style="display:none;">
    <form class="search-form" autocomplete="off">
      <input type="text" id="search-input" class="form-control" placeholder="Search...">
    </form>
  </div>
</div>
  
<div class="title-table">
  <div class='title-row'>
    <div id='data-cell'>
      <table id="male" class="table table-male" style="width:100%">
        <thead>  
          <tr>     
          <th>ARV number</th>
          <th>Name</th>
          <th>Earliest start date</th>
          <th>Date enrolled</th>
          <th>Gender</th>
          <th>Birth Date</th>
          <th>Action</th>
         </tr>
        </thead>

        <!-- Table rows Data is inserted here-->
        <tbody></tbody>
        
        <!-- Table footer -->
        <tfoot></tfoot>
      </table>
    </div>
  </div>
</div>
</div>
<div id="footer" class="dark">
    <div id="buttons" class="buttons" style="top:0px">
        <button id="logout" class="green left" style="position :relative; float:right;"><span>Finish</span></button>
        <button id="find" class="blue" style="width:200px;" style="right:-0px; float:right;"><span>Back</span></button>
    </div>
</div>
</div>
</div>
<script type="text/javascript"> 

   jQuery(document).ready(function($) {
            $('#logout').click(function() {
                window.location = '/clinic';
            })
            $('#find').click(function() {
                history.go(-1);// /report/data_cleaning';

            })
        })

  /**
  * Quick search from the returned queries
  */
  var Male = [];

  
  /* Write data to the view
  */
 
  function addRows(){
    dTable.row.add().draw(["1","2","3","4","5","6","7"]).draw()
  }

  function renderData(data) {
    var table = document.getElementById("male").getElementsByTagName("tbody")[0];
    var obj = data;
    for (var index = 0; index < obj.length; index++) {

        
        var tr = document.createElement("tr");
        table.appendChild(tr);

        var td = document.createElement("td");
        td.innerHTML = obj[index].identifier;
        tr.appendChild(td);

        var td = document.createElement("td");
        td.innerHTML = obj[index].name;
        tr.appendChild(td); 

        var td = document.createElement("td");
        td.innerHTML = obj[index].earliest_start_date;
        tr.appendChild(td);

        var td = document.createElement("td");
        td.innerHTML = obj[index].date_enrolled;
        tr.appendChild(td);

        var td = document.createElement("td");
        td.innerHTML = obj[index].gender;
        tr.appendChild(td);

        var td = document.createElement("td");
        td.innerHTML = obj[index].birthdate;
        tr.appendChild(td);

        var td = document.createElement("td");
        tr.appendChild(td);
        
        var btn = document.createElement('a');
        btn.innerHTML = 'View';
        btn.setAttribute('class', 'btn btn-primary');
        btn.setAttribute('href', '/views/patient/mastercard.html?patient_id='
        +obj[index].patient_id);
        td.appendChild(btn);
    }
    initTable();
  }

  dTable = null;
  jQuery(document).ready(function() {
    //initTable();
    getMale();
  });
 

  function initTable(){

    dTable = jQuery('#male');
    dTable.dataTable({
                  "lengthChange":false,
                  "pageLength" : 10,
                  "autoWidth": true,
                  "bInfo" : true,
                  "sScrollY": "441px"
                  
                });
  }  

  function getMale() {
    var apiProtocol = sessionStorage.apiProtocol;
    var apiURL = sessionStorage.apiURL;
    var apiPort = sessionStorage.apiPort;
    
    var url = apiProtocol + "://" + apiURL + ":" + apiPort + "/api/v1/male";
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && (this.status == 201 || this.status == 200)) {
          var table = document.getElementById("male").getElementsByTagName("tbody")[0];
          var obj = JSON.parse(this.responseText);
          console.log(obj);
          document.getElementById("cover-div").style="display:none;";
          document.getElementById("loader").style="display:none;"; 
          /**
          * Keeping the returned queries
          */
          Male.push(...obj);
          
          /**
          * Displaying the returned results
          */
          renderData(obj);
          //addRows(obj);
        }
      };

      xhttp.open("GET", url, true);
      xhttp.setRequestHeader('Authorization', sessionStorage.getItem("authorization"));
      xhttp.setRequestHeader('Content-type', "application/json");
      xhttp.send(); 
  }         
    
 
  </script>

<img src="/assets/images/loading.gif" id="loader"/>
<div id ="cover-div"> </div>